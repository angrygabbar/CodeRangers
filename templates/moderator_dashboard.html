{% extends "layout.html" %}
{% block title %}Moderator Dashboard{% endblock %}
{% block content %}
<h1 class="text-3xl font-bold text-white mb-6 animate-dynamic">Moderator Dashboard</h1>

<div class="space-y-8">
    <!-- Scheduled Coding Events -->
    <div class="bg-white/5 dark:bg-gray-800/20 rounded-lg shadow-xl p-6 animate-dynamic backdrop-blur-sm border border-white/10">
        <h2 class="text-2xl font-bold text-white mb-4">Scheduled Coding Events</h2>
        <div class="space-y-4">
            {% for event in scheduled_events %}
                <div class="bg-white/5 dark:bg-gray-700/20 p-4 rounded-lg animate-stagger">
                    <div class="md:flex md:justify-between">
                        <div>
                            <p class="font-bold text-lg text-white">{{ event.assigned_problem.title }}</p>
                            <p class="text-sm text-gray-300">Assigned to: <span class="font-semibold">{{ event.username }}</span></p>
                            <p class="text-sm text-gray-400">Starts: {{ event.start_time_ist }} IST</p>
                            <p class="text-sm text-gray-400">Ends: {{ event.end_time_ist }} IST</p>
                        </div>
                        <div class="flex items-start space-x-2 mt-4 md:mt-0">
                            <!-- Reschedule Form -->
                            <form action="{{ url_for('reschedule_event', user_id=event.id) }}" method="POST" class="flex items-center space-x-2">
                                <input type="datetime-local" name="new_start_time" required class="px-2 py-1 border text-xs border-gray-600 rounded-md bg-gray-700/50 text-white">
                                <input type="datetime-local" name="new_end_time" required class="px-2 py-1 border text-xs border-gray-600 rounded-md bg-gray-700/50 text-white">
                                <button type="submit" class="px-3 py-1 text-xs rounded-md text-white bg-yellow-600 hover:bg-yellow-700">Reschedule</button>
                            </form>
                            <!-- Cancel Button -->
                            <a href="{{ url_for('cancel_event', user_id=event.id) }}" class="px-3 py-1 text-xs rounded-md text-white bg-red-600 hover:bg-red-700">Cancel</a>
                        </div>
                    </div>
                </div>
            {% else %}
                <p class="text-gray-400">No coding events are currently scheduled.</p>
            {% endfor %}
        </div>
    </div>
</div>
{% endblock %}
